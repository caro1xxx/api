import { TypesPlanItem } from "../types/state";
import styled from "styled-components";
import { createOrder } from "../api/order";
import { useReactive } from "ahooks";
import { useNavigate } from "react-router-dom";
import { Button } from "antd";

const Wrap = styled.div`
  user-select: none;
  background-color: #26a699;
  padding: 20px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  background: linear-gradient(to bottom, #047670, #afff8f);
  .top {
    .iconWrap {
      height: 50px;
      width: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #047670;
      border-radius: 10px;
      .icon {
        height: 30px;
        width: 30px;
        background-size: 100%;
      }
    }
    .title {
      font-size: 30px;
      color: white;
      font-weight: bolder;
      font-style: italic;
    }
  }
  .info {
    font-size: 20px;
  }
  .buy {
    width: 100%;
    color: white;
    border-radius: 5px;
    margin-top: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bolder;
    cursor: pointer;
    svg {
      margin-right: 10px;
    }
  }
`;

const Property = styled.div`
  padding: 10px 0px;
  .value {
    color: #32671d;
    font-weight: bolder;
    font-size: 30px;
  }
  .time {
    font-size: 14px;
    color: #efefef;
  }
  .detail {
    margin-top: 20px;
    span {
      color: #32671d;
      font-weight: bolder;
    }
    > div {
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      font-size: 14px;
      > svg {
        margin-right: 10px;
      }
    }
  }
`;

type Props = {
  data: TypesPlanItem;
};

const PlanItem = (props: Props) => {
  const navigate = useNavigate();
  const state = useReactive({
    loading: false,
  });
  const check = async (planId: string) => {
    if (state.loading) return;
    let result = await createOrder(planId);
    if (result.code === 200) {
      navigate(`/order?no=${result.order}`);
    }
    state.loading = false;
  };
  return (
    <Wrap>
      <div className="top center">
        <div className="iconWrap">
          <div className="icon" style={{ backgroundImage: `url("${props.data.fields.icon}")` }}></div>
        </div>
        <div style={{ flex: 1 }}></div>
        <div className="title">{props.data.fields.title}订阅</div>
      </div>
      <Property>
        <div className="center">
          <div className="value">￥{props.data.fields.price}</div>
          <div style={{ flex: 1 }}></div>
          <div className="time">有效期{props.data.fields.time}天</div>
        </div>
        <div className="detail">
          <div>
            <svg
              viewBox="0 0 1025 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="3499"
              width="20"
              height="20"
            >
              <path
                d="M426.36802 298.389114l0 457.409308c0 6.898758 5.610007 12.505015 12.505015 12.505015 6.893758 0 12.505015-5.606257 12.505015-12.505015L451.378051 268.202827c0-3.338754-1.300002-6.473758-3.662504-8.837511-2.363753-2.362503-5.507507-3.666254-8.842511-3.666254-3.637504 0-7.090009 1.591252-9.477512 4.365005l-0.552501 0.643751-0.825001 0.718751c-0.13125 0.11125-0.25875 0.21875-0.38625 0.34125L272.490333 416.890509c-2.362503 2.367503-3.666254 5.507507-3.666254 8.847511 0 3.340004 1.298752 6.483758 3.661254 8.842511 2.363753 2.358753 5.503757 3.657504 8.842511 3.657504 3.340004 0 6.480008-1.298752 8.843761-3.657504L426.36802 298.389114 426.36802 298.389114z"
                fill="#4b786f"
                p-id="3500"
              ></path>
              <path
                d="M585.161964 255.699062c-6.900008 0-12.510015 5.610007-12.510015 12.503765l0 487.595595c0 6.898758 5.610007 12.505015 12.510015 12.505015 3.637504 0 7.090009-1.588752 9.472512-4.361255l0.551251-0.643751 1.225001-1.070001 155.131439-155.117689c2.363753-2.363753 3.667504-5.502507 3.667504-8.847511 0-3.340004-1.298752-6.480008-3.662504-8.842511-2.363753-2.353753-5.502507-3.657504-8.847511-3.657504-3.340004 0-6.480008 1.303752-8.847511 3.662504L597.66198 725.610886 597.66198 268.202827C597.66198 261.309069 592.056973 255.699062 585.161964 255.699062L585.161964 255.699062z"
                fill="#4b786f"
                p-id="3501"
              ></path>
              <path
                d="M512.026875 0C229.23903 0 0 229.23903 0 512.026875c0 282.744095 229.23903 511.973125 512.026875 511.973125 282.769095 0 512.006875-229.22903 512.006875-511.973125C1024.035 229.23903 794.80597 0 512.026875 0zM475.12808 755.798423c0 19.988774-16.26502 36.255044-36.255044 36.255044-19.991274 0-36.255044-16.26627-36.255044-36.255044l0-400.075488-95.655117 95.655117c-6.850008 6.845008-15.956269 10.610013-25.635031 10.610013-9.677512 0-18.778773-3.765005-25.628781-10.610013-6.851258-6.846258-10.625013-15.952519-10.625013-25.640031s3.773755-18.793773 10.625013-25.645031l155.165189-155.146439c0.36625-0.36625 0.747501-0.717501 1.133751-1.060001 6.875008-7.602509 16.62127-11.937515 26.875033-11.937515 9.682512 0 18.783773 3.768755 25.633781 10.620013 6.851258 6.850008 10.625013 15.956269 10.621263 25.638781L475.12808 755.798423zM768.340938 623.907012 613.179499 779.048451c-0.410001 0.415001-0.820001 0.786251-1.167501 1.088751-6.875008 7.588759-16.60627 11.915015-26.850033 11.915015-19.995024 0-36.260044-16.26627-36.260044-36.255044L548.90192 268.202827c0-19.990024 16.26502-36.253794 36.260044-36.253794 19.990024 0 36.250044 16.26377 36.250044 36.253794l0 400.074238 95.653867-95.652617c6.860008-6.842508 15.962519-10.606263 25.640031-10.606263s18.778773 3.765005 25.625031 10.600013c6.860008 6.855008 10.630013 15.962519 10.630013 25.650031C778.960951 607.949492 775.190946 617.058253 768.340938 623.907012z"
                fill="#4b786f"
                p-id="3502"
              ></path>
              <path d="M512.026875 999.04372" fill="#4b786f" p-id="3503"></path>
            </svg>
            <div>
              每<span>30</span>天<span>{props.data.fields.flow / (props.data.fields.time / 30)}</span>GB 流量
            </div>
          </div>
          <div>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4574"
              width="20"
              height="20"
            >
              <path
                d="M689.94048 358.76352c-149.18144 90.0608-288.23552 161.86368-379.5968 206.73024H165.02272L1.04448 398.97088l74.32192-25.43616L212.64384 425.7792l42.65472 21.28896a5559.91552 5559.91552 0 0 1 107.35616-82.16064l-177.4592-286.83776 0.20992-1.19296c-0.9984-10.6496-0.11776-21.54496 5.1456-31.7952C205.4144 16.13824 241.19296 4.57216 270.4384 19.24096L588.288 178.63168c8.12544 4.08576 14.17216 10.10176 19.21536 16.76288C791.6544 79.65696 972.6464-1.536 1016.97024 90.53696c24.1152 50.09408-46.90944 99.13856-327.02976 268.22656z m-228.7616 248.4224c0.52224-7.46496 1.64864-14.42304 2.3552-21.74464 22.8352-11.96032 46.72512-24.65792 71.69024-38.23104-2.65216 19.49184-4.82304 39.45472-5.93408 59.97568h186.08128c-2.87744-54.65088-11.5712-106.73664-24.72448-148.20352 10.81856-6.4 21.60128-12.76416 32.53248-19.35872 8.47872-5.12 16.17408-9.78944 24.25856-14.6944 20.57216 50.57024 35.0208 112.8192 39.91552 182.25664h110.90944c-13.6448-82.24768-63.03744-152.3712-131.80416-193.75616 25.43616-15.4368 48.61952-29.63456 70.1952-42.96704 85.5552 64.86528 141.07136 167.2704 141.07136 282.89536 0 191.89248-152.2688 347.82208-342.528 354.56-2.2784 0.2048-4.54144 0.73216-6.85056 0.73216-0.82944 0-1.664-0.2304-2.5088-0.256-1.11616 0-2.19136 0.1536-3.32288 0.1536-186.4192 0-338.9952-143.6928-353.7408-326.30272 32.28672-15.08352 85.65248-40.63744 152.832-75.0592h39.56736z m439.61344 66.46272h-111.57504c-1.8944 91.93472-19.2512 172.81024-46.54592 231.808a279.1936 279.1936 0 0 0 158.12096-231.808z m-278.08256 259.14368c55.1424 0 89.62048-130.03776 93.4912-259.14368H528.4352c3.95776 129.10592 39.13216 259.14368 94.26944 259.14368z m-110.47936-22.6304c-30.44864-59.38688-50.59584-142.12608-52.75136-236.51328H344.39168c7.79776 106.31168 74.27072 196.28544 167.83872 236.51328z m0 0"
                fill="#4b786f"
                p-id="4575"
              ></path>
            </svg>
            <div>
              全球<span>17</span>国家/地区 直连出国线路
            </div>
          </div>
          <div>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="7549"
              width="20"
              height="20"
            >
              <path
                d="M229.985084 0.213324l202.658223 574.269406v-0.298654l16.041998 45.224782c89.084288 252.064164 136.954294 387.183867 137.210283 387.482522 0.17066 0 13.652764 0.853298 29.950752 1.706595 49.320612 2.133244 110.502062 7.67968 156.836132 13.226116 10.666222 1.279947 19.881838 1.706596 20.479146 1.279946l-200.951627-570.002916-18.601891-52.477814-103.377026-292.254489c-19.625849-55.464356-36.265156-102.737053-37.118454-104.528978L431.790009 0.042665H230.198408z"
                fill="#4b786f"
                p-id="7550"
              ></path>
              <path
                d="M592.977959 0.554644l-0.426649 226.3799-0.341319 226.379901-18.644556-52.563143V400.665972l-24.105662 503.872339c23.679013 66.855881 36.350485 102.523728 36.47848 102.694388 0.17066 0.17066 13.652764 1.023957 29.950752 1.791925 49.363277 2.133244 110.502062 7.67968 157.006791 13.226116 10.666222 1.279947 19.924503 1.706596 20.479147 1.279946s0.853298-231.243698 0.725303-512.405316L793.758927 0.469314h-200.780968zM229.985084 0.127995v511.552018c0 281.332278 0.298654 511.765343 0.639973 512.106663s17.748594-1.279947 38.697055-3.669181c20.905796-2.559893 49.91792-5.546436 64.423982-6.826382 22.100412-2.133244 88.23099-6.399733 95.91067-6.399733 2.218574 0 2.389234-11.51952 2.687888-216.737636l0.341319-216.737636 16.212658 45.224782 5.546436 16.041998 24.318986-503.44569-8.106328-23.295029-37.545103-104.102329-1.279946-3.711845H229.985084z"
                fill="#4b786f"
                p-id="7551"
              ></path>
            </svg>
            <div>
              解锁<span>流媒体服务</span>(Netflix/ChatGPT/HBO等)
            </div>
          </div>
          <div>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="8634"
              width="20"
              height="20"
            >
              <path
                d="M800 736H448a32 32 0 0 0 0 64h352a32 32 0 0 0 0-64zM800 480H448a32 32 0 0 0 0 64h352a32 32 0 0 0 0-64zM800 224H448a32 32 0 0 0 0 64h352a32 32 0 0 0 0-64zM304 736h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64zM304 480h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64zM304 224h-64a32 32 0 0 0 0 64h64a32 32 0 0 0 0-64z"
                p-id="8635"
                fill="#4b786f"
              ></path>
              <path
                d="M864 96H160a96 96 0 0 0-96 96v640a96 96 0 0 0 96 96h704a96 96 0 0 0 96-96V192a96 96 0 0 0-96-96z m32 736a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32v-160h672a32 32 0 0 0 0-64H128v-192h672a32 32 0 0 0 0-64H128V192a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v640z"
                p-id="8636"
                fill="#4b786f"
              ></path>
            </svg>
            <div>
              <span>不限制</span>同时使用设备个数
            </div>
          </div>
          <div>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="10575"
              width="20"
              height="20"
            >
              <path
                d="M502.714987 58.258904l-126.531056-54.617723a52.797131 52.797131 0 0 0-41.873587 96.855428A447.865322 447.865322 0 0 0 392.02307 946.707184a61.535967 61.535967 0 0 0 13.83649 1.820591 52.797131 52.797131 0 0 0 13.65443-103.773672 342.453118 342.453118 0 0 1-31.678278-651.771485l-8.374718 19.480321a52.615072 52.615072 0 0 0 27.855039 69.182448 51.522718 51.522718 0 0 0 20.572675 4.369418A52.797131 52.797131 0 0 0 476.498481 254.882703L530.205907 127.441352a52.979191 52.979191 0 0 0-27.49092-69.182448zM962.960326 509.765407A448.775617 448.775617 0 0 0 643.992829 68.090094a52.797131 52.797131 0 1 0-30.403866 101.042786A342.635177 342.635177 0 0 1 674.578753 801.059925a52.615072 52.615072 0 0 0-92.30395-50.612422l-71.913335 117.246043a52.433013 52.433013 0 0 0 17.295612 72.82363l117.063985 72.823629a52.797131 52.797131 0 1 0 54.617722-89.755123l-16.021198-10.013249A448.593558 448.593558 0 0 0 962.960326 509.765407z"
                fill="#4b786f"
                p-id="10576"
              ></path>
            </svg>
            <div>
              每月购买日<span>免费</span>手动<span>重置流量</span>
            </div>
          </div>
          <div>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2348"
              width="22"
              height="22"
            >
              <path
                d="M912.659113 623.96149c-47.297081-0.299981-87.794581 28.698229-104.493551 69.895686-2.499846 6.099624-8.299488 10.099377-14.89908 10.099377H767.968043c-35.297821 0-63.99605-28.698229-63.99605-63.996051v-62.996112c114.792915-9.499414 205.187336-107.893341 205.187336-227.885935 0-121.692489-98.093946-220.886367-221.686318-227.985929C650.975264 49.396951 575.179942 0 487.185372 0 369.292649 0 272.998592 88.594532 264.59911 200.887601c-86.694649 23.998519-149.790755 97.393989-149.790755 184.288626 0 102.493674 87.794581 186.688478 198.587744 192.588114h6.599592V639.960502c0 35.297821-28.698229 63.99605-63.99605 63.996051h-25.298439c-6.599593 0-12.399235-3.999753-14.89908-10.099377-16.698969-41.197457-57.296464-70.195668-104.493551-69.895686C48.512447 624.361465-2.08443 677.058213 0.115434 739.854337 2.11531 799.850634 51.412268 847.947666 112.008528 847.947666c47.097093 0 87.294612-28.99821 103.893588-70.095674 2.399852-5.99963 8.299488-9.899389 14.799086-9.899389H255.999641c70.695637 0 127.9921-57.296464 127.9921-127.992101v-54.196655c0-4.399728 3.599778-7.999506 7.999507-7.999506h79.995063c4.399728 0 7.999506 3.599778 7.999506 7.999506v207.587188c0 6.599593-3.999753 12.399235-10.099377 14.899081-41.197457 16.698969-70.195668 57.296464-69.895686 104.493551 0.399975 62.796124 53.196717 113.293008 115.892847 111.193137C575.979892 1021.936927 623.97693 972.539976 623.97693 912.04371c0-47.097093-28.99821-87.294612-70.095674-103.893588-5.99963-2.399852-9.899389-8.299488-9.899389-14.799087V585.763847c0-4.399728 3.599778-7.999506 7.999506-7.999506h79.995063c4.399728 0 7.999506 3.599778 7.999506 7.999506V639.960502c0 70.695637 57.296464 127.9921 127.992101 127.992101h25.298439c6.499599 0 12.399235 3.899759 14.799086 9.899389C824.664544 818.949455 864.862063 847.947666 911.959156 847.947666c60.59626 0 109.893218-48.097032 111.893094-108.093329 2.199864-62.796124-48.397013-115.492872-111.193137-115.892847zM112.008528 783.951615c-26.498365 0-47.997038-21.498673-47.997038-47.997037s21.498673-47.997038 47.997038-47.997038 47.997038 21.498673 47.997038 47.997038-21.498673 47.997038-47.997038 47.997037z m447.972352 127.992101c0 26.498365-21.498673 47.997038-47.997038 47.997038s-47.997038-21.498673-47.997038-47.997038 21.498673-47.997038 47.997038-47.997038 47.997038 21.498673 47.997038 47.997038z m351.978276-127.992101c-26.498365 0-47.997038-21.498673-47.997038-47.997037s21.498673-47.997038 47.997038-47.997038 47.997038 21.498673 47.997038 47.997038-21.498673 47.997038-47.997038 47.997037z"
                p-id="2349"
                fill="#5f796f"
              ></path>
            </svg>
            <div>
              <span>自研云端</span>代理规则面板 告别本地繁琐规则设置
            </div>
          </div>
          <div>
            <svg
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="11837"
              width="22"
              height="22"
            >
              <path
                d="M512 85.333333c72.533333 0 139.808 8.362667 200.202667 22.325334 21.258667 4.906667 40.192 10.208 56.586666 15.52 9.301333 3.018667 16.106667 5.472 20.245334 7.114666C831.733333 144.906667 864 192.106667 864 238.624v385.034667c0 43.402667-25.130667 95.52-58.837333 121.109333l-227.626667 172.810667c-36.992 28.085333-94.005333 28.149333-131.072 0l-227.626667-172.810667C185.28 719.285333 160 666.912 160 623.658667V238.624c0-46.826667 32.170667-94.218667 75.157333-108.405333 4.16-1.642667 10.901333-4.074667 20.053334-7.04a684.437333 684.437333 0 0 1 56.586666-15.52C372.192 93.685333 439.466667 85.333333 512 85.333333z m0 64c-67.456 0-129.930667 7.765333-185.781333 20.682667-19.424 4.48-36.586667 9.28-51.274667 14.048-5.056 1.632-9.418667 3.146667-13.056 4.48-2.058667 0.746667-3.349333 1.248-3.84 1.450667a32 32 0 0 1-2.485333 0.885333c-16.074667 5.034667-31.562667 27.626667-31.562667 47.744v385.034667c0 23.498667 16.128 56.917333 33.536 70.133333l227.626667 172.810667c14.176 10.773333 39.530667 10.741333 53.674666 0l227.626667-172.810667C784 680.469333 800 647.306667 800 623.658667V238.624c0-19.84-15.626667-42.506667-32-47.882667l-2.048-0.746666a143.829333 143.829333 0 0 0-3.84-1.450667c-3.637333-1.333333-8-2.848-13.056-4.48a620.778667 620.778667 0 0 0-51.274667-14.048C641.930667 157.098667 579.456 149.333333 512 149.333333z m137.354667 190.72a32 32 0 0 1 45.290666 45.226667l-213.013333 213.333333a32 32 0 0 1-45.226667 0.064l-106.986666-106.549333a32 32 0 1 1 45.162666-45.344l84.341334 83.989333z"
                fill="#4b786f"
                p-id="11838"
              ></path>
            </svg>
            <div>
              承诺<span>不记录客户端</span>任何流量 所有流量均直连节点
            </div>
          </div>
        </div>
      </Property>
      <div style={{ fontSize: "10px" }} className="center">
        <div>剩余:{props.data.fields.stock}</div>
        <div style={{ flex: 1 }}></div>
        <span style={{ fontWeight: "bolder", color: "#9d2b5e" }}>无退款服务</span> 介意请勿下单
      </div>
      <Button
        style={{
          background:
            props.data.fields.stock === 0
              ? "linear-gradient(to right, #383838a1, #151515)"
              : "linear-gradient(to right, #1F896F, #157E38)",
        }}
        className="buy center"
        onClick={() => {
          if (props.data.fields.stock === 0) return;
          check(props.data.pk);
        }}
      >
        <svg
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="14943"
          width="20"
          height="20"
        >
          <path
            d="M529.78217 48.576307c-246.72 0-446.726246 200.000102-446.726246 446.709965 0 246.709965 200.006246 446.708941 446.726246 446.708941 246.721024 0 446.72727-199.999078 446.72727-446.708941C976.50944 248.577434 776.503296 48.576307 529.78217 48.576307zM408.385536 724.046438c-18.950349 0-34.317005-15.361843-34.317005-34.314547 0-18.95465 15.366554-34.317619 34.317005-34.317619 18.954445 0 34.317005 15.362867 34.317005 34.317619C442.703462 708.684595 427.339981 724.046438 408.385536 724.046438zM618.101248 733.695181c-26.059571 0-47.186534-21.126144-47.186534-47.185715 0-26.058445 21.12809-47.180595 47.186534-47.180595 26.060595 0 47.18551 21.123072 47.18551 47.180595C665.286758 712.569037 644.160819 733.695181 618.101248 733.695181zM827.649126 316.21591c0 13.335757-11.555635 24.146944-25.809818 24.146944l-81.197557 0-92.148429 261.262336c-3.498803 10.746778-13.894042 17.305088-24.741478 16.469094-0.674406 0.052224-1.354957 0.101274-2.046669 0.101274L354.153156 618.195558c-13.877658 0-25.126298-10.814259-25.126298-24.148992l0-7.469112c0-13.334733 11.24864-24.150016 25.126298-24.150016l229.050895 0 12.21673-34.625638L312.42409 527.8018c-13.336269 0-24.148992-10.810163-24.148992-24.147968l0-7.467065c0-13.337805 10.812723-24.148992 24.148992-24.148992l302.330807 0c0.109466 0 0.216986 0.016384 0.324403 0.017408l11.920998-33.794662L286.686884 438.26052c-13.338317 0-24.148992-10.811187-24.148992-24.147968l0-7.469112c0-13.335757 10.810675-24.147968 24.148992-24.147968l359.982147 0 28.983296-82.167398c3.146752-9.680486 11.899494-15.965594 21.52919-16.505958 1.252557-0.17705 2.522522-0.296755 3.827302-0.296755l100.829468 0c14.254182 0 25.809818 10.810163 25.809818 24.147968L827.648106 316.215942z"
            p-id="14944"
            fill="#ffffff"
          ></path>
        </svg>
        {props.data.fields.stock === 0 ? "已售罄" : "立即购买"}
      </Button>
    </Wrap>
  );
};

export default PlanItem;
